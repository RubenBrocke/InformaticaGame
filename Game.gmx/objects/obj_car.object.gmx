<!--This Document is generated by GameMaker, if you edit it by hand then you do so at your own risk!-->
<object>
  <spriteName>spr_car</spriteName>
  <solid>0</solid>
  <visible>-1</visible>
  <depth>0</depth>
  <persistent>0</persistent>
  <parentName>&lt;undefined&gt;</parentName>
  <maskName>&lt;undefined&gt;</maskName>
  <events>
    <event eventtype="0" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Set variables
max_speed = 8
turning_circle = 2
acceleration = 0.5
move_speed = 0

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///initialize particles
psys = part_system_create() 
part_system_automatic_draw(psys,false)
part_system_position(psys,0,0)
emm = part_emitter_create(psys)
part_system_depth(psys,-20000)

//tire particle
tire_part = part_type_create()
part_type_sprite(tire_part,spr_tire_part,false,false,false)
part_type_life(tire_part,10,300)
part_type_alpha2(tire_part,0.1,0)

//smoke particle
smoke_part = part_type_create()
part_type_sprite(smoke_part,spr_smoke_part,false,false,false)
part_type_size(smoke_part,0.1,2,0.1,0.1)
part_type_orientation(smoke_part,0,359,1,1,false)
part_type_life(smoke_part,10,200)
part_type_alpha2(smoke_part,0.1,0)
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="3" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Movement
//Set keys
key_right = keyboard_check(vk_right)
key_left = keyboard_check(vk_left)
key_up = keyboard_check(vk_up)
key_down = keyboard_check(vk_down)

//Turn right
if key_right == true {
    phy_rotation += turning_circle
    }

//Turn left
if key_left == true {
    phy_rotation -= turning_circle
    }

//Accelerate
if key_up == true {
    if move_speed &gt;=0 {
        move_speed += acceleration }
    if move_speed &lt; 0 {
        move_speed += acceleration*4 }
    }

//Brake or reverse
if key_down == true {
    if move_speed &lt;= 0 {
        move_speed -= acceleration/2 }
    if move_speed &gt; 0 {
        move_speed -= acceleration*4 }
    }

//Speedlimit
if move_speed &gt; max_speed {
    move_speed = max_speed }
if move_speed &lt; -max_speed/2 {
    move_speed = -max_speed/2 }

//Moving
forward_x = lengthdir_x(50,-phy_rotation +90) * move_speed
forward_y = lengthdir_y(50,-phy_rotation +90) * move_speed
physics_apply_force(x,y,forward_x,forward_y)

//Slowing down
if !keyboard_check_direct(vk_down) and !keyboard_check_direct(vk_up){
    if move_speed &gt; 0{
        move_speed -=0.25 }
    if move_speed &lt; 0{
        move_speed +=0.125 }
    }

</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///Focus on player

view_xview = phy_position_x-view_wview/2
view_yview = phy_position_y-view_hview/2
</string>
          </argument>
        </arguments>
      </action>
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>///particle system
//particle systems
if phy_speed &gt; 1{

    part_emitter_region(psys,emm,x-1,x+1,y-1,y+1,ps_shape_rectangle,ps_distr_gaussian)
    inertia_dir = point_direction(x,y,x+phy_speed_x,y+phy_speed_y)
    forward_dir = point_direction(x,y,x+lengthdir_x(50,-phy_rotation),y+lengthdir_y(50,-phy_rotation))
    angle_dif = abs(angle_difference(forward_dir,inertia_dir)+90)
    
   if angle_dif &gt; 25{
   //emmit tires
    part_type_orientation(tire_part,-phy_rotation,-phy_rotation,0,0,0)
    part_emitter_burst(psys,emm,tire_part,20)
   //emmit smoke
   part_type_speed(smoke_part,1,2,0,0)
   part_type_direction(smoke_part,inertia_dir,inertia_dir,0,0)
   part_emitter_burst(psys,emm,smoke_part,1)
    }
    }
</string>
          </argument>
        </arguments>
      </action>
    </event>
    <event eventtype="8" enumb="0">
      <action>
        <libid>1</libid>
        <id>603</id>
        <kind>7</kind>
        <userelative>0</userelative>
        <isquestion>0</isquestion>
        <useapplyto>-1</useapplyto>
        <exetype>2</exetype>
        <functionname></functionname>
        <codestring></codestring>
        <whoName>self</whoName>
        <relative>0</relative>
        <isnot>0</isnot>
        <arguments>
          <argument>
            <kind>1</kind>
            <string>part_system_drawit(psys)
draw_self()

</string>
          </argument>
        </arguments>
      </action>
    </event>
  </events>
  <PhysicsObject>-1</PhysicsObject>
  <PhysicsObjectSensor>0</PhysicsObjectSensor>
  <PhysicsObjectShape>2</PhysicsObjectShape>
  <PhysicsObjectDensity>1</PhysicsObjectDensity>
  <PhysicsObjectRestitution>0.100000001490116</PhysicsObjectRestitution>
  <PhysicsObjectGroup>0</PhysicsObjectGroup>
  <PhysicsObjectLinearDamping>1</PhysicsObjectLinearDamping>
  <PhysicsObjectAngularDamping>8</PhysicsObjectAngularDamping>
  <PhysicsObjectFriction>2</PhysicsObjectFriction>
  <PhysicsObjectAwake>-1</PhysicsObjectAwake>
  <PhysicsObjectKinematic>0</PhysicsObjectKinematic>
  <PhysicsShapePoints>
    <point>28,4</point>
    <point>22,58</point>
    <point>10,58</point>
    <point>4,4</point>
  </PhysicsShapePoints>
</object>
